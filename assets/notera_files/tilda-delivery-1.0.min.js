window.t_delivery__browserLang=(window.navigator.userLanguage||window.navigator.language).toUpperCase().slice(0,2),t_onReady((function(){var e=document.getElementById("allrecords");if(e)var t=e.getAttribute("data-tilda-project-lang");t&&(window.t_delivery__browserLang=t)})),window.t_delivery__isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);var tcart_newDelivery={deliveryState:{currentRequest:null,projectId:null,city:{},services:{},searchboxes:{},focusoutTimers:{},cityCoordinates:null,ymapApiKey:null,cityGuid:null,streetGuid:null,currencyCode:null,pickupList:null,postalCode:null,staticCities:null,geoData:null,autocompleteData:{cities:null},badResponseCounters:{services:0},activeServiceUid:null,freeDeliveryThreshold:null,fullNames:{city:"",street:"",house:"",pickup:""}},init:function(e){var t=this;window.tcart_newDeliveryActive=!0,t.updateProjectId();var r=document.querySelector(".t706");r&&(t.deliveryState.currencyCode=r.getAttribute("data-project-currency-code")),t.deliveryState.ymapApiKey=e,t.deliveryState.ymapApiKey&&t.mapAppendScript("",e);var a=r.querySelector(".t-radio__wrapper-delivery"),i=r.querySelectorAll(".t-radio__wrapper-delivery");i.length>0&&Array.prototype.forEach.call(i,(function(e){e.innerHTML=""})),a.setAttribute("id","customdelivery");var o=t.createTitle(t_delivery__dict("delivery"));a.appendChild(o);var s=document.querySelector(".t706 .t-form__submit button");s&&(s.classList.add("t706__submit_disable"),s.setAttribute("disabled","disabled"));var d=function(e){if(e){var r=t.createInput("",t_delivery__dict("city"),null,null,null,null,"searchbox-input load js-tilda-rule","tildadelivery-city",null,null,!0,null,"chosevalue"),i=t.createSearchbox(r,"city-searchbox"),o=t.createInput("","",null,null,null,null,"","tildadelivery-postalcode",!0),s=t.createInput("","hash",null,null,null,null,"","tildadelivery-hash",!0),d=t.createInput("","country",null,null,null,null,"","tildadelivery-country",!0);a.appendChild(o),a.appendChild(s),a.appendChild(d),a.appendChild(i),t.searchboxInit("city-searchbox","city");var n=document.createElement("div"),l;if(n.id="delivery-services-wrapper",a.appendChild(n),t.deliveryState.geoData=e,e.cities?(l=e.cities[0],t.deliveryState.staticCities=e.cities):l=e,l&&(t.deliveryState.city=l,t.deliveryState.cityGuid=l.guid,t.deliveryState.countryIso=l.countryIso,t.deliveryState.postalCode=l.postalCode,t.deliveryState.cityPostalCode=l.postalCode),""===l.name){var c=document.querySelector(".t706 #city-searchbox input");return c.classList.remove("load"),void(c.readOnly=!1)}l.fullName&&(document.querySelector(".t706 #city-searchbox .t-input-description").textContent=l.fullName),l.countryIso&&(document.querySelector('[name="tildadelivery-country"]').value=l.countryIso),t.deliveryState.ymapApiKey&&l.name&&t.getCityCoordinates("yandex",l.name,(function(e){var r;try{(r=e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" "))&&(r=[r[1],r[0]],t.deliveryState.cityCoordinates=r)}catch(e){console.error(e)}})),t.deliveryState.searchboxes["city-searchbox"]||(t.deliveryState.searchboxes["city-searchbox"]={}),t.deliveryState.searchboxes["city-searchbox"].address=l,t.deliveryState.fullNames.city=l.fullName,l.name&&(document.querySelector('input[name="tildadelivery-city"]').value=l.name),document.querySelector('input[name="tildadelivery-city"]').setAttribute("data-option-selected",!0),t.setPostalCodeInput(l.postalCode),t.renderServices(l.postalCode),tcart__updateDelivery()}};t.getCityFromGeo(t.deliveryState.projectId,d,(function(e){t.changeEndpoint(e,(function(){t.getCityFromGeo(t.deliveryState.projectId,d,(function(){t.showUnavailableMessage(a)}))}),(function(){t.showUnavailableMessage(a)}))}));var n=document.getElementById("customdelivery");if(n){var l="click",c="";window.t_delivery__isMobile?(l+=" touchstart",c=".searchbox-input"):(l+=" mousedown",c+=".t-input-clear"),l.split(" ").forEach((function(e){n.addEventListener(e,(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode){if(t.matches(".searchbox-change-pickup")){var r=t.closest(".searchbox-wrapper");r&&r.classList.remove("show-info")}if(t.matches(c)){u.call(t,e);break}}}),!1)}))}function u(e){var r=e.target,a=!1;if(r.matches(".searchbox-input")&&window.t_delivery__isMobile){var i=getComputedStyle(r),o=r.offsetWidth+parseInt(i.marginLeft)+parseInt(i.marginRight),s=r.closest(".t-input-block");o-e.offsetX<=45&&s&&s.classList.contains("active")&&(a=!0)}else r.matches(".t-input-clear")&&(a=!0);if(a){var d=r.closest(".searchbox-wrapper"),n=d.getAttribute("id");d.querySelector(".searchbox-list").innerHTML="",clearTimeout(t.deliveryState.focusoutTimers[n]),d.querySelector(".searchbox-input").value="",d.querySelector(".t-input-block").classList.remove("active"),setTimeout((function(){d.querySelector(".searchbox-input").focus()}),50),t.deliveryState.searchboxes[n]&&t.deliveryState.searchboxes[n].address&&(t.deliveryState.searchboxes[n].address=null)}}t.renderFullAddressNode()},disableChoseServiceControls:function(){var e=document.querySelectorAll('.t706 input[name="tildadelivery-type"]');Array.prototype.forEach.call(e,(function(e){e.setAttribute("disabled","disabled")}))},enableChoseServiceControls:function(){var e=document.querySelectorAll('.t706 input[name="tildadelivery-type"]');Array.prototype.forEach.call(e,(function(e){e.removeAttribute("disabled")}))},getFullAddress:function(){var e=this.deliveryState.fullNames,t="";return e.pickup?t+=e.city+", "+e.pickup:e.street?t+=e.city+", "+e.street:null===e.pickup&&null===e.street&&e.house&&(t+=e.city+","),e.house&&(t+=" "+e.house),t},renderFullAddressNode:function(){var e=document.createElement("div"),t;e.classList.add("delivery-full-address"),e.classList.add("t-descr"),document.querySelector(".t706__cartwin-totalamount-info").insertAdjacentElement("afterend",e)},setFullAddress:function(e){var t=document.querySelector(".delivery-full-address");t&&(t.textContent=e)},changeCartInputsHandler:function(){var e=this,t=document.querySelectorAll(".t706 input");Array.prototype.forEach.call(t,(function(t){t.removeEventListener("change",e.saveTcartDelivery),t.addEventListener("change",e.saveTcartDelivery)}))},saveTcartDelivery:function(){var e=["city","street","pickup-name","pickup-address","pickup-id","house","entrance","floor","aptoffice","phone","entrancecode","comment","service-id","hash","postalcode","country","userinitials","onelineaddress"],t=document.querySelector(".t706"),r;e.forEach((function(e){var r="",a=t.querySelector('[name="tildadelivery-'+e+'"]');switch(a&&(r=a.value),e){case"service-id":(a=t.querySelector('[name="tildadelivery-type"]:checked'))&&(r=a.getAttribute("data-service-id"));break;case"pickup-id":(a=t.querySelector("[data-pickup-id]"))&&(r=a.getAttribute("data-pickup-id"));break;case"pickup-address":(a=t.querySelector("[data-pickup-address]"))&&(r=a.getAttribute("data-pickup-address"))}""!==r&&void 0!==window.tcart.delivery&&(window.tcart.delivery[e]=r)})),void 0===window.t_delivery__userFieldsAutoComplete&&(window.t_delivery__userFieldsAutoComplete={}),["street","house","entrance","floor","aptoffice","phone","entrancecode","comment","postalcode","country","userinitials","onelineaddress"].forEach((function(e){var r="",a=t.querySelector('[name="tildadelivery-'+e+'"]');a&&(r=a.value),""!==r&&void 0!==window.tcart.delivery&&(window.t_delivery__userFieldsAutoComplete[e]=r)}))},restoreTcartDelivery:function(){var e=["street","house","entrance","floor","aptoffice","phone","entrancecode","comment","postalcode","country","userinitials","onelineaddress"],t=document.querySelector(".t706"),r=window.t_delivery__userFieldsAutoComplete;e.forEach((function(e){var a="tildadelivery-"+e,i=t.querySelector("[name="+a+"]");i&&void 0!==r&&void 0!==r[e]&&""!==r[e]&&(i.value=r[e],"street"===e&&tcart__inputErrorHandler.show(i,t_delivery__dict("selectAddress")))}))},mapAppendScript:function(e,t){var r=document.createElement("script");r.src="https://api-maps.yandex.ru/2.1/?apikey="+(t||"")+"&lang=ru_RU",document.head.appendChild(r)},mapInit:function(e){if("yandex"===e&&void 0!==window.ymaps){var t=document.createElement("div");t.id="delivery-yandex-map",document.getElementById("pickup-searchbox").querySelector(".searchbox-inner-wrapper").appendChild(t);var r=this;window.ymaps.ready((function(){window.t_delivery__map=new ymaps.Map("delivery-yandex-map",{center:r.deliveryState.cityCoordinates||[55.76,37.64],zoom:8,controls:["zoomControl"],maxZoom:20},{yandexMapDisablePoiInteractivity:!0});var e,t=window.t_delivery__map.panes.get("events").getElement(),a={EN:"Use two fingers to move the map",RU:"Чтобы переместить карту проведите по ней двумя пальцами",FR:"Utilisez deux doigts pour déplacer la carte",DE:"Verschieben der Karte mit zwei Fingern",ES:"Para mover el mapa, utiliza dos dedos",PT:"Use dois dedos para mover o mapa",UK:"Переміщуйте карту двома пальцями",JA:"地図を移動させるには指 2 本で操作します",ZH:"使用双指移动地图",PL:"Przesuń mapę dwoma palcami",KK:"Картаны екі саусақпен жылжытыңыз",IT:"Utilizza due dita per spostare la mappa",LV:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem"},i={alignItems:"center",boxSizing:"border-box",color:"white",display:"flex",justifyContent:"center",fontSize:"22px",fontFamily:"Arial,sans-serif",opacity:"0.0",padding:"25px",textAlign:"center",transition:"opacity .3s",touchAction:"auto"};Object.keys(i).forEach((function(e){t.style[e]=i[e]})),window.tStoreIsMobile&&(window.t_delivery__map.behaviors.disable("drag"),window.ymaps.domEvent.manager.add(t,"touchmove",(function(e){1===e.get("touches").length&&(t.style.transition="opacity .3s",t.style.background="rgba(0, 0, 0, .45)",t.textContent=a[window.t_delivery__browserLang]||a.EN,t.style.opacity="1")})),window.ymaps.domEvent.manager.add(t,"touchend",(function(){t.style.transition="opacity .8s",t.style.opacity="0"})))}))}},mapAddPoints:function(e,t,r){var a=this;void 0!==window.ymaps&&window.ymaps.ready((function(){window.t_delivery__map.geoObjects&&window.t_delivery__map.geoObjects.removeAll();var e=[];if(t.forEach((function(t){0===t.coordinates[0]&&0===t.coordinates[1]||e.push(t.coordinates)})),e.length>0){for(var i=new ymaps.Clusterer({preset:"islands#circleIcon",groupByCoordinates:!1,clusterDisableClickZoom:!1,clusterHideIconOnBalloonOpen:!1,geoObjectHideIconOnBalloonOpen:!1}),o=function(e){var i=t[e],o=i.name,s=i.address||"",d=i.workTime||"",n=i.phones||"",l=i.addressComment||"",c="",u="";u+="<b>"+o+"</b>";var p="";p+="<b>"+t_delivery__dict("address")+": </b>"+s+"</br>";var v="";return i.cash&&"n"===i.cash&&(v+="cash"),p+='<div style="margin: 10px 0;" class="delivery-map-point-select" '+(v?'data-restrictions="'+v+'"':"")+" data-point-index="+e+' onclick="window.tcart__chosePointOnMap(this); return false;">'+t_delivery__dict("select")+"</div>",p+=l?l+"</br>":"",p+=d?"<b>"+t_delivery__dict("workingHours")+": </b>"+d+"</br>":"",n.length&&(p+=(c=n.length>1?"<b>"+t_delivery__dict("phones")+": </b>":"<b>"+t_delivery__dict("phone")+": </b>")+n.join(", ")+"</br>"),window.tcart__chosePointOnMap=function(e){var i=e.dataset.pointIndex,o=t[i],s=r.querySelector(".searchbox-input"),d=r.getAttribute("id");tcart__inputErrorHandler.hide(s),s.setAttribute("data-option-selected",!0),a.deliveryState.fullNames.pickup=o.address;var n=o.postalCode;""===n&&(n=a.deliveryState.cityPostalCode),a.deliveryState.postalCode=n,a.deliveryState.pickupPointId=o.id,a.deliveryState.searchboxes[d]||(a.deliveryState.searchboxes[d]={}),a.deliveryState.searchboxes[d].address={name:o.name,pickupid:o.id,postalCode:n},a.setPostalCodeInput(n),a.changePickupHandler(o.id,o.name,n,r,o.address),document.querySelector('.t706 [name="tildadelivery-pickup-name"]').value=o.name,a.saveTcartDelivery(),window.t_delivery__map.balloon.close(),a.showPickupInfo(o.id,r),a.hidePaymentMethod(e)},{balloonContentHeader:u,balloonContentBody:p,balloonContentFooter:""}},s=function(e){return{preset:"islands#circleIcon",index:e}},d=[],n=0,l=e.length;n<l;n++)d[n]=new ymaps.Placemark(e[n],o(n),s(n));i.options.set({gridSize:80,clusterDisableClickZoom:!1}),i.add(d),window.t_delivery__map.geoObjects.add(i),window.t_delivery__map.setBounds(i.getBounds(),{checkZoomRange:!0}).then((function(){window.t_delivery__map.getZoom()>20&&window.t_delivery__map.setZoom(18)}),this)}}))},setPostalCodeInput:function(e){var t;document.querySelector(".t706").querySelector('input[name="tildadelivery-postalcode"]').value=e},setHashInput:function(e){var t;document.querySelector(".t706").querySelector('input[name="tildadelivery-hash"]').value=e},createSearchbox:function(e,t){var r=document.createElement("div");r.classList.add("searchbox-wrapper"),r.setAttribute("id",t);var a=document.createElement("div");a.classList.add("searchbox-inner-wrapper"),a.appendChild(e);var i=document.createElement("div");i.classList.add("searchbox-list"),i.setAttribute("tabindex",-1),a.appendChild(i),r.appendChild(a);var o=document.createElement("div");return o.classList.add("searchbox-info"),o.setAttribute("tabindex",-1),r.appendChild(o),r},searchboxInit:function(e,t){var r=document.getElementById(e),a=r.querySelector(".searchbox-input"),i=a.closest(".t-input-block"),o=this,s;"paste keyup".split(" ").forEach((function(d){a.addEventListener(d,(function(d){d.keyCode>=33&&d.keyCode<=40||(clearTimeout(s),o.deliveryState.searchboxes[e]&&(o.deliveryState.searchboxes[e].address=null),o.deliveryState.searchboxes[e]&&"pickup"!==t&&(o.deliveryState.searchboxes[e].autocompleteAddress=null),""===a.value||i.classList.contains("active")||i.classList.add("active"),s=setTimeout((function(){o.changeSearchboxInputHandler(d,r,t),s=null}),500))}),!1)}));var d=!1,n;"click mousedown keyup".split(" ").forEach((function(e){a.addEventListener(e,(function(e){d||(d=!0,clearTimeout(n),n=setTimeout((function(){o.clickSearchboxInputHandler(e,r,t)}),150)),setTimeout((function(){d=!1}),200)}),!1)})),a.addEventListener("blur",(function(e){var a=e.relatedTarget;a&&a.classList.contains("searchbox-list")||(clearTimeout(s),o.focusoutSearchboxInputHandler(r,t))}),!1)},clickSearchboxInputHandler:function(e,t,r){var a=t.querySelector(".searchbox-input"),i=a.closest(".t-input-block");""===a.value||i.classList.contains("active")||i.classList.add("active");var o=t.querySelector(".searchbox-list"),s;if(t.querySelectorAll(".searchbox-list-item").length)o.style.display="";else if(!a.classList.contains("load")){var d,n=parseInt(a.getAttribute("data-service-id"),10);n&&(d=this.deliveryState.services[n].strongAddress);var l=this,c=t.getAttribute("id");this.deliveryState.searchboxes[c]&&"pickup"!==r&&(this.deliveryState.searchboxes[c].autocompleteAddress=null);var u=(e.target.value||"").trim(),p,v;switch(t.classList.contains("load")||(t.classList.add("load"),t.readOnly=!0),r){case"city":if(""===u)return o.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>",o.style.display="",t.classList.remove("load"),void(t.readOnly=!1);if(p={pattern:u},p=JSON.stringify(p),l.deliveryState.searchboxes[c]&&(l.deliveryState.searchboxes[c].autocompleteAddress||l.deliveryState.staticCities)){if(t.classList.remove("load"),t.readOnly=!1,(v=l.deliveryState.staticCities||l.deliveryState.searchboxes[c].autocompleteAddress).error||0===v.length)return void(""!==a.value?o.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":o.innerHTML="");o.style.display="",l.deliveryState.searchboxes[c].autocompleteAddress=v[0],l.deliveryState.searchboxes[c].addresses=v,l.deliveryState.autocompleteData.cities=v,l.fillSearchList(o,v,"address"),l.choseSearchListItemHandler(t,r)}else{var y=function(e){t.classList.remove("load"),t.readOnly=!1,e.error||0===e.length?""!==a.value?o.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":o.innerHTML="":(o.style.display="",l.deliveryState.searchboxes[c].autocompleteAddress=e[0],l.deliveryState.searchboxes[c].addresses=e,l.deliveryState.autocompleteData.cities=e,l.fillSearchList(o,e,"address"),l.choseSearchListItemHandler(t,r))};l.getAddresses(p,r,y,(function(e){l.changeEndpoint(e,(function(){l.getAddresses(p,r,y)}))}))}break;case"pickup":var m=a.getAttribute("data-service-id"),h="",f=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+m+'"]');if(f&&(h=f.dataset.restrictions||""),l.deliveryState.searchboxes[c]&&l.deliveryState.searchboxes[c].autocompleteAddress){if(t.classList.remove("load"),t.readOnly=!1,(v=l.deliveryState.searchboxes[c].autocompleteAddress).error||0===v.length){o.innerHTML="";var _=window.t_delivery__browserLang.toLowerCase(),S=v.userFriendlyError?v.userFriendlyError[_]?v.userFriendlyError[_]:v.userFriendlyError.en:"";return void tcart__errorHandler.show(S||v.error)}v=(v=v.filter((function(e){return-1!==e.name.toLowerCase().indexOf(u.toLowerCase())||-1!==e.address.toLowerCase().indexOf(u.toLowerCase())}))).map((function(e){return"cash"===h&&(e.cash="n"),e})),l.deliveryState.searchboxes[c]||(l.deliveryState.searchboxes[c]={}),l.fillSearchList(o,v,"pickup"),l.choseSearchListItemHandler(t,r)}else{var b=function(e){if(t.classList.remove("load"),t.readOnly=!1,e.error||0===e.length){""!==a.value?o.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":o.innerHTML="";var i=window.t_delivery__browserLang.toLowerCase(),s=e.userFriendlyError?e.userFriendlyError[i]?e.userFriendlyError[i]:e.userFriendlyError.en:"";tcart__errorHandler.show(s||e.error)}else l.deliveryState.searchboxes[c]||(l.deliveryState.searchboxes[c]={}),l.deliveryState.searchboxes[c].autocompleteAddress=e,l.deliveryState.pickupList=e,l.fillSearchList(o,e,"pickup"),l.choseSearchListItemHandler(t,r)};l.getPickupList({projectId:l.deliveryState.projectId,postalCode:l.deliveryState.city.postalCode,deliveryId:m,pattern:u,onDone:b,onFail:function(e){l.changeEndpoint(e,(function(){l.getPickupList({projectId:l.deliveryState.projectId,postalCode:l.deliveryState.city.postalCode,deliveryId:m,pattern:u,onDone:b})}))}})}break;case"street":p={pattern:u,fias:this.deliveryState.cityGuid},p=JSON.stringify(p),l.deliveryState.searchboxes[c]||(l.deliveryState.searchboxes[c]={}),d&&"street"===r&&a.setAttribute("data-option-selected",!1);var g=function(e){t.classList.remove("load"),t.readOnly=!1,e.error||0===e.length?""!==a.value?o.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":o.innerHTML="":(l.deliveryState.searchboxes[c].autocompleteAddress=e[0],l.fillSearchList(o,e,"address"),l.choseSearchListItemHandler(t,r))};l.getAddresses(p,r,g,(function(e){l.changeEndpoint(e,(function(){l.getAddresses(p,r,g)}))}));break;case"house":p={pattern:u,fias:this.deliveryState.streetGuid||this.deliveryState.cityGuid},p=JSON.stringify(p);var w=function(e){t.classList.remove("load"),t.readOnly=!1,e.error||0===e.length?o.innerHTML="":(l.deliveryState.searchboxes[c]||(l.deliveryState.searchboxes[c]={}),l.deliveryState.searchboxes[c].autocompleteAddress=e[0],l.fillSearchList(o,e,"address"),l.choseSearchListItemHandler(t,r))};l.getAddresses(p,r,w,(function(e){l.changeEndpoint(e,(function(){l.getAddresses(p,r,w)}))}));break;default:t.classList.remove("load"),t.readOnly=!1}}},changeSearchboxInputHandler:function(e,t,r){var a=this,i=t.querySelector(".searchbox-list"),o=t.querySelector(".searchbox-input"),s=o.closest(".t-input-block"),d=t.getAttribute("id"),n=parseInt(o.getAttribute("data-service-id")),l;if(n&&(l=this.deliveryState.services[n].strongAddress),!o.classList.contains("load")){var c=(e.target.value||"").trim(),u,p;switch(t.classList.contains("load")||(t.classList.add("load"),t.readOnly=!0),""===o.value&&s.classList.remove("active"),r){case"city":if(u={pattern:c},u=JSON.stringify(u),a.deliveryState.searchboxes[d]||(a.deliveryState.searchboxes[d]={}),a.deliveryState.searchboxes[d]&&a.deliveryState.staticCities){if(t.classList.remove("load"),t.readOnly=!1,p=a.deliveryState.staticCities,Array.isArray(p)?p=p.filter((function(e){return-1!==e.name.toLowerCase().indexOf(c.toLowerCase())||-1!==e.fullName.toLowerCase().indexOf(c.toLowerCase())})):console.log(p),0===p.length)return void(""!==o.value?i.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":i.innerHTML="");a.deliveryState.searchboxes[d].autocompleteAddress=p[0],a.deliveryState.searchboxes[d].addresses=p,a.deliveryState.autocompleteData.cities=p,a.fillSearchList(i,p,"address"),a.choseSearchListItemHandler(t,r)}else{var v=function(e){t.classList.remove("load"),t.readOnly=!1,e.error||0===e.length?""!==o.value?i.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":i.innerHTML="":(a.deliveryState.searchboxes[d].autocompleteAddress=e[0],a.deliveryState.searchboxes[d].addresses=e,a.deliveryState.autocompleteData.cities=e,a.fillSearchList(i,e,"address"),a.choseSearchListItemHandler(t,r))};a.getAddresses(u,r,v,(function(e){a.changeEndpoint(e,(function(){a.getAddresses(u,r,v)}))}))}break;case"pickup":if(o.setAttribute("data-option-selected",!1),a.deliveryState.searchboxes[d]&&a.deliveryState.searchboxes[d].autocompleteAddress){if(t.classList.remove("load"),t.readOnly=!1,0===(p=(p=a.deliveryState.searchboxes[d].autocompleteAddress).filter((function(e){return-1!==e.name.toLowerCase().indexOf(c.toLowerCase())||-1!==e.address.toLowerCase().indexOf(c.toLowerCase())}))).length)return void(""!==o.value?i.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":i.innerHTML="");a.fillSearchList(i,p,"pickup"),a.choseSearchListItemHandler(t,r)}break;case"street":u={pattern:c,fias:this.deliveryState.cityGuid},u=JSON.stringify(u),a.deliveryState.searchboxes[d]||(a.deliveryState.searchboxes[d]={}),l&&o.setAttribute("data-option-selected",!1);var y=function(e){t.classList.remove("load"),t.readOnly=!1,e.error||0===e.length?""!==o.value?i.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":i.innerHTML="":(a.deliveryState.searchboxes[d].autocompleteAddress=e[0],a.deliveryState.searchboxes[d].addresses=e,a.fillSearchList(i,e,"address"),a.choseSearchListItemHandler(t,r))};a.getAddresses(u,r,y,(function(e){a.changeEndpoint(e,(function(){a.getAddresses(u,r,y)}))}));break;case"house":u={pattern:c,fias:this.deliveryState.streetGuid||this.deliveryState.cityGuid},u=JSON.stringify(u),a.deliveryState.searchboxes[d]||(a.deliveryState.searchboxes[d]={});var m=function(e){t.classList.remove("load"),t.readOnly=!1,e.error||0===e.length?""!==o.value?i.innerHTML='<div class="searchbox-list-item t-text" style="user-select: none; pointer-events: none;">'+t_delivery__dict("noResult")+"</div>":i.innerHTML="":(a.deliveryState.searchboxes[d].autocompleteAddress=e[0],a.deliveryState.searchboxes[d].addresses=e,a.fillSearchList(i,e,"address"),a.choseSearchListItemHandler(t,r))};a.getAddresses(u,r,m,(function(e){a.changeEndpoint(e,(function(){a.getAddresses(u,r,m)}))}))}}},choseSearchListItemHandler:function(e,t){var r=e.getAttribute("id"),a=e.querySelector(".searchbox-input"),i=e.querySelector(".t-input-description"),o=e.querySelector(".searchbox-list"),s=e.querySelectorAll(".searchbox-list-item"),d,n=this,l,c=a.closest(".t-input-block");tcart__inputErrorHandler.hide(a);var u=!1;"click mousedown".split(" ").forEach((function(p){Array.prototype.forEach.call(s,(function(s){s.addEventListener(p,(function(s){if(!u){switch(u=!0,c.classList.remove("active"),clearTimeout(n.deliveryState.focusoutTimers[r]),d=s.target.dataset.postalcode,n.deliveryState.postalCode=d,n.setPostalCodeInput(d),n.deliveryState.searchboxes[r]||(n.deliveryState.searchboxes[r]={}),t){case"city":var p;a.classList.add("load"),a.readOnly=!0,tcart__errorHandler.hide(),a.value=s.target.dataset.name,i.innerHTML=s.target.dataset.fullName,document.querySelector('.t706 [name="tildadelivery-country"]').value=s.target.dataset.countryIso,a.setAttribute("data-guid",s.target.dataset.guid),n.deliveryState.ymapApiKey&&s.target.dataset.name&&n.getCityCoordinates("yandex",s.target.dataset.name,(function(e){var t;try{(t=e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" "))&&(t=[t[1],t[0]],n.deliveryState.cityCoordinates=t)}catch(e){console.error(e)}})),n.deliveryState.searchboxes[r].address={name:s.target.dataset.name,postalCode:d,guid:s.target.dataset.guid},n.deliveryState.city={name:s.target.dataset.name,fullName:s.target.dataset.fullName,postalCode:d,guid:s.target.dataset.guid},s.target.dataset.hasHousesWithoutStreets&&(n.deliveryState.city.hasHousesWithoutStreets=!0),n.deliveryState.cityPostalCode=d;for(var v=n.deliveryState.autocompleteData.cities.length,y=0;y<v;y++)if(n.deliveryState.autocompleteData.cities[y].guid===s.target.dataset.guid){p=n.deliveryState.autocompleteData.cities[y];break}n.deliveryState.geoData=p,n.deliveryState.cityGuid=s.target.dataset.guid,n.deliveryState.streetGuid=null,n.deliveryState.fullNames={},n.deliveryState.fullNames.city=s.target.dataset.fullName,document.getElementById("delivery-services-wrapper").innerHTML="",n.renderServices(d),o.style.display="none";break;case"street":l=parseInt(a.getAttribute("data-service-id"),10),a.value=s.target.dataset.shortname,a.setAttribute("data-guid",s.target.dataset.guid),d=d||n.deliveryState.city.postalCode,n.deliveryState.searchboxes[r].address={name:s.target.dataset.name,shortName:s.target.dataset.shortname,postalCode:d,guid:s.target.dataset.guid},n.deliveryState.streetGuid=s.target.dataset.guid,n.deliveryState.fullNames.street=s.target.dataset.shortname,n.deliveryState.fullNames.house=null,n.clearHouseInput(),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery();var m=function(e){if(e.error||0===e.length){var t=window.t_delivery__browserLang.toLowerCase(),r=e.userFriendlyError?e.userFriendlyError[t]?e.userFriendlyError[t]:e.userFriendlyError.en:"";return tcart__errorHandler.show(r||e.error),window.tcart.emptyDeliveryServices=!0,void tcart__updateDelivery()}if(window.tcart.emptyDeliveryServices=!1,tcart__errorHandler.hide(),void 0!==e.hash&&n.setHashInput(e.hash),void 0!==e.price){var a=e.price;n.updatePriceValueInRadio(a,l)}n.setFullAddress(n.getFullAddress()),tcart__showDeliveryPrice()};n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:d,serviceId:l,onDone:m,onFail:function(e){n.changeEndpoint(e,(function(){n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:d,serviceId:l,onDone:m,onFail:function(){var e="";e="RU"===window.t_delivery__browserLang?'Невозможно получить почтовый индекс для доставки. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a postal code for delivery. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show("Request failed: "+e),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery()}})}))}}),o.innerHTML="";break;case"pickup":var h=s.target.dataset.coordinates.split(",");n.hidePaymentMethod(s.target),n.changePickupHandler(s.target.dataset.pickupid,s.target.dataset.name,d,e,s.target.dataset.address,h),n.deliveryState.searchboxes[r].address={name:s.target.dataset.name,pickupid:s.target.dataset.pickupid,postalCode:d},n.deliveryState.fullNames[t]=s.target.dataset.address,n.deliveryState.pickupPointId=s.target.dataset.pickupid,n.showPickupInfo(s.target.dataset.pickupid,e),o.innerHTML="";break;case"house":l=parseInt(a.getAttribute("data-service-id"),10),a.value=s.target.dataset.name,d=d||n.deliveryState.city.postalCode,n.deliveryState.searchboxes[r].address={postalCode:d},n.deliveryState.fullNames[t]=s.target.dataset.name,window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery();var f=function(e){if(e.error||0===e.length){var t=window.t_delivery__browserLang.toLowerCase(),r=e.userFriendlyError?e.userFriendlyError[t]?e.userFriendlyError[t]:e.userFriendlyError.en:"";return tcart__errorHandler.show(r||e.error),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery(),void n.removePriceValueInRadio(l)}if(window.tcart.emptyDeliveryServices=!1,tcart__errorHandler.hide(),void 0!==e.hash&&n.setHashInput(e.hash),void 0!==e.price){var a=e.price;n.updatePriceValueInRadio(a,l)}n.setFullAddress(n.getFullAddress()),tcart__showDeliveryPrice()};n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:d,serviceId:l,onDone:f,onFail:function(e){n.changeEndpoint(e,(function(){n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:d,serviceId:l,onDone:f,onFail:function(){var e="";e="RU"===window.t_delivery__browserLang?'Невозможно получить почтовый индекс для доставки. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for house" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a postal code for delivery. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for house" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show("Request failed: "+e),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery()}})}))}}),o.innerHTML=""}a.setAttribute("data-option-selected",!0),setTimeout((function(){u=!1}),200)}}),!1)}))}))},focusoutSearchboxInputHandler:function(e,t){var r=this,a,i=e.querySelector(".searchbox-list"),o=e.querySelector(".t-input-description"),s=e.getAttribute("id"),d=e.querySelector(".searchbox-input"),n=d.closest(".t-input-block"),l,c=parseInt(d.getAttribute("data-service-id"),10),u;c&&""!==i.innerHTML?(u=this.deliveryState.services[c].strongAddress,this.deliveryState.city.hasHousesWithoutStreets&&(u=!1),d.setAttribute("data-option-selected",!1)):d.setAttribute("data-option-selected",!0),this.deliveryState.focusoutTimers[s]=setTimeout((function(){if(n.classList.remove("active"),r.deliveryState.searchboxes[s]&&r.deliveryState.searchboxes[s].address)return tcart__inputErrorHandler.hide(d),void("city"===t?i.style.display="none":i.innerHTML="");switch(t){case"city":if(r.deliveryState.searchboxes[s]&&r.deliveryState.searchboxes[s].autocompleteAddress&&d.value===r.deliveryState.searchboxes[s].autocompleteAddress.name){var p;d.classList.add("load"),d.readOnly=!0,l=r.deliveryState.searchboxes[s].autocompleteAddress,r.deliveryState.searchboxes[s].address=l,tcart__inputErrorHandler.hide(d),r.deliveryState.ymapApiKey&&l.name&&r.getCityCoordinates("yandex",l.name,(function(e){var t;try{(t=e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" "))&&(t=[t[1],t[0]],r.deliveryState.cityCoordinates=t)}catch(e){console.error(e)}})),a=l.postalCode,r.deliveryState.postalCode=a,r.setPostalCodeInput(a),document.querySelector('[name="tildadelivery-country"]').value=l.countryIso,d.value=l.name,o.innerHTML=l.fullName,d.setAttribute("data-guid",l.guid),r.deliveryState.city.name=l.name,r.deliveryState.city.fullName=l.fullName,r.deliveryState.city.postalCode=a,r.deliveryState.city.guid=l.guid,r.deliveryState.cityPostalCode=a,r.deliveryState.cityGuid=l.guid,r.deliveryState.streetGuid=null,r.deliveryState.fullNames={},r.deliveryState.fullNames[t]=l.fullName;for(var v=r.deliveryState.autocompleteData.cities.length,y=0;y<v;y++)if(r.deliveryState.autocompleteData.cities[y].guid===l.guid){p=r.deliveryState.autocompleteData.cities[y];break}r.deliveryState.geoData=p,i.style.display="none",r.renderServices(a),d.setAttribute("data-option-selected",!0)}else{i.innerHTML="",o.innerHTML="";var m=document.getElementById("addresses-wrapper");m&&m.parentNode&&m.parentNode.removeChild(m),d.setAttribute("data-option-selected",!1),r.deliveryState.streetGuid=null,r.deliveryState.fullNames={},tcart__inputErrorHandler.show(d,t_delivery__dict("selectCity"))}document.getElementById("delivery-services-wrapper").innerHTML="";break;case"street":if(r.deliveryState.searchboxes[s]&&r.deliveryState.searchboxes[s].autocompleteAddress&&d.value===r.deliveryState.searchboxes[s].autocompleteAddress.shortName){l=r.deliveryState.searchboxes[s].autocompleteAddress,r.deliveryState.searchboxes[s].address=l,r.deliveryState.fullNames[t]=l.shortName,tcart__inputErrorHandler.hide(d),a=l.postalCode,r.deliveryState.postalCode=a,d.value=l.shortName,d.setAttribute("data-guid",l.guid),r.deliveryState.streetGuid=l.guid,r.setPostalCodeInput(a),d.setAttribute("data-option-selected",!0),i.innerHTML="";var h=function(e){if(e.error||0===e.length){var t=window.t_delivery__browserLang.toLowerCase(),a=e.userFriendlyError?e.userFriendlyError[t]?e.userFriendlyError[t]:e.userFriendlyError.en:"";tcart__errorHandler.show(a||e.error)}else{if(void 0!==e.hash&&r.setHashInput(e.hash),void 0!==e.price){var i=e.price;r.updatePriceValueInRadio(i,c)}r.setFullAddress(r.getFullAddress()),tcart__showDeliveryPrice()}};r.getDeliveryPrice({projectId:r.deliveryState.projectId,postalCode:a,serviceId:c,onDone:h,onFail:function(e){r.changeEndpoint(e,(function(){r.getDeliveryPrice({projectId:r.deliveryState.projectId,postalCode:a,serviceId:c,onDone:h,onFail:function(){var e="";e="RU"===window.t_delivery__browserLang?'Невозможно получить почтовый индекс для доставки. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a postal code for delivery. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show("Request failed: "+e),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery()}})}))}})}else{if(u&&(d.setAttribute("data-option-selected",!1),i.innerHTML="",tcart__inputErrorHandler.show(d,t_delivery__dict("selectAddress"))),r.deliveryState.city.hasHousesWithoutStreets){d.removeAttribute("data-guid"),r.deliveryState.streetGuid=null,r.deliveryState.fullNames.street=null,window.t_delivery__userFieldsAutoComplete&&(window.t_delivery__userFieldsAutoComplete.street="");var f=document.querySelector(".t706 .t-form__submit button");f.classList.remove("t706__submit_disable"),f.removeAttribute("disabled")}i.innerHTML=""}r.deliveryState.fullNames.house=null,r.clearHouseInput();break;case"house":if(r.deliveryState.searchboxes[s]&&r.deliveryState.searchboxes[s].autocompleteAddress&&d.value===r.deliveryState.searchboxes[s].autocompleteAddress.name){l=r.deliveryState.searchboxes[s].autocompleteAddress,r.deliveryState.searchboxes[s].address=l,r.deliveryState.fullNames[t]=l.name,tcart__inputErrorHandler.hide(d),a=l.postalCode,r.deliveryState.postalCode=a,d.val(l.name),d.setAttribute("data-option-selected",!0),r.setPostalCodeInput(a),i.innerHTML="";var _=function(e){if(e.error||0===e.length){var t=window.t_delivery__browserLang.toLowerCase(),a=e.userFriendlyError?e.userFriendlyError[t]?e.userFriendlyError[t]:e.userFriendlyError.en:"";tcart__errorHandler.show(a||e.error)}else{if(void 0!==e.hash&&r.setHashInput(e.hash),void 0!==e.price){var i=e.price;r.updatePriceValueInRadio(i,c)}r.setFullAddress(r.getFullAddress()),tcart__showDeliveryPrice()}};r.getDeliveryPrice({projectId:r.deliveryState.projectId,postalCode:a,serviceId:c,onDone:_,onFail:function(e){r.changeEndpoint(e,(function(){r.getDeliveryPrice({projectId:r.deliveryState.projectId,postalCode:a,serviceId:c,onDone:_,onFail:function(){var e="";e="RU"===window.t_delivery__browserLang?'Невозможно получить почтовый индекс для доставки. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a postal code for delivery. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show("Request failed: "+e),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery()}})}))}})}else i.innerHTML="",r.deliveryState.city.hasHousesWithoutStreets&&tcart__inputErrorHandler.show(d,t_delivery__dict("selectAddress"));break;case"pickup":i.innerHTML="";var S=null,b=null;r.deliveryState.searchboxes[s]&&r.deliveryState.searchboxes[s].autocompleteAddress&&(S=l=r.deliveryState.searchboxes[s].autocompleteAddress).forEach((function(e){e.name===d.value&&(b=e)})),S&&b?(l=b,r.deliveryState.searchboxes[s].address=l,r.deliveryState.fullNames[t]=l.address,tcart__inputErrorHandler.hide(d),d.setAttribute("data-option-selected",!0),r.changePickupHandler(l.id,l.name,l.postalCode,e,l.address,l.coordinates),r.setPostalCodeInput(l.postalCode),r.deliveryState.pickupPointId=l.id,r.deliveryState.postalCode=l.postalCode,i.innerHTML=""):(d.setAttribute("data-option-selected",!1),d.removeAttribute("data-pickup-id"),d.removeAttribute("data-pickup-address"),d.removeAttribute("data-delivery-price"),delete r.deliveryState.pickupPointId,tcart__inputErrorHandler.show(d,t_delivery__dict("selectAddress")))}}),200)},fillSearchList:function(e,t,r){var a=document.createElement("div"),i,o,s;t.forEach((function(e){var t=document.createElement("div");switch(t.classList.add("searchbox-list-item"),t.classList.add("t-text"),r){case"pickup":o=e.name,s=e.address;var d="";e.cash&&"n"===e.cash&&(d+="cash"),t.dataset.restrictions=d;break;case"address":if(e.fullName){o=e.fullName.split(",").reverse()[0];var n=e.fullName;(n=n.split(",").reverse()).shift(),n=n.join(", "),s=n}else o=e.name,s=""}t.dataset.name=e.name,t.dataset.fullName=e.fullName||"",t.dataset.postalcode=e.postalCode,t.dataset.guid=e.guid||"",t.dataset.pickupid=e.id||"",t.dataset.shortname=e.shortName||"",t.dataset.address=e.address||"",e.hasHousesWithoutStreets&&(t.dataset.hasHousesWithoutStreets=!0),t.dataset.coordinates=e.coordinates||"",t.dataset.countryIso=e.countryIso||"";var l=document.createElement("div");l.classList.add("searchbox-list-item-text"),l.appendChild(document.createTextNode(o)),t.appendChild(l),(i=document.createElement("div")).classList.add("searchbox-list-item-description"),i.appendChild(document.createTextNode(s)),t.appendChild(i),a.appendChild(t)})),e.innerHTML="",e.appendChild(a),e.scrollTop=0},showPickupInfo:function(e,t){var r=t.querySelector(".searchbox-info"),a;t.classList.add("show-info"),this.deliveryState.pickupList.forEach((function(t){t.id!=e||(a=t)}));var i=a.name,o=a.address||"",s=a.workTime||"",d=a.phones||"",n=a.addressComment||"",l="";l+='<p style="font-weight: 400; margin-bottom: 15px;" class="t-text">'+t_delivery__dict("pickup")+":</p>",l+='<p class="t-text">'+i+"</p>",l+='<p class="t-text">'+t_delivery__dict("address")+": "+o+"</p>",n&&(l+='<p class="t-text" style="opacity: 0.6; line-height: 22px; font-size: .9rem;">'+n+"</p>"),l+=s?'<p class="t-text">'+t_delivery__dict("workingHours")+": "+s+"</p>":"",d.length&&(l+=d.length>1?'<p class="t-text">'+t_delivery__dict("phones")+": "+d.join(", ")+"</p>":'<p class="t-text">'+t_delivery__dict("phone")+": "+d.join(", ")+"</p>"),l+='<span style="border-bottom: 1px dashed #000; font-weight: 400; margin-top: 10px; display: inline-block; cursor: pointer;" class="t-text searchbox-change-pickup">'+t_delivery__dict("change")+"</span>",r.innerHTML=l},renderServices:function(e,t){this.deliveryState.services={},this.deliveryState.postalCode={};var r=document.getElementById("delivery-services-wrapper");r&&(r.innerHTML="");var a=document.getElementById("addresses-wrapper");a&&a.parentNode&&a.parentNode.removeChild(a);var i=this.deliveryState.cityPostalCode||"",o=this,s=this.deliveryState.currencyCode,d=document.querySelector(".t706 #city-searchbox input"),n=document.querySelector(".t706"),l=n.querySelectorAll(".t706 .t706__cartwin-products, .t706 .t706__orderform"),c=n.querySelector(".t-radio__wrapper-delivery"),u=function(e){if(e.error){var r=window.t_delivery__browserLang.toLowerCase(),a=e.userFriendlyError?e.userFriendlyError[r]?e.userFriendlyError[r]:e.userFriendlyError.en:"";return window.tcart.emptyDeliveryServices=!0,tcart__errorHandler.show(a||e.error),d.classList.remove("load"),d.readOnly=!1,void tcart__updateDelivery()}var i;0===e.length?(window.tcart.emptyDeliveryServices=!0,o.deliveryState.activeServiceUid=null,tcart__errorHandler.show(t_delivery__dict("deliveryNotPossible")),d.classList.remove("load"),d.readOnly=!1):window.tcart.emptyDeliveryServices=!1,e.forEach((function(t,r){if(t.currency&&t.currency!==o.deliveryState.currencyCode)return console.error(t.title+": wrong delivery currency ("+t.currency+")"),void(e.length===r+1&&(Array.prototype.forEach.call(l,(function(e){e.style.pointerEvents=""})),d.classList.remove("load"),d.readOnly=!1));o.deliveryState.services[t.id]={},o.deliveryState.services[t.id].fields=t.fields,o.deliveryState.services[t.id].strongAddress=t.strongAddress;var a="";"n"===t.cash&&(a+="cash");var i=!1;0===r&&(i=!0);var s=o.createRadio({title:t.title,minimumTime:t.minimumDeliverTime,minimumPrice:t.minimumPrice,staticPrice:t.staticPrice,deliveryType:t.type,serviceId:t.id,hint:t.hint,hash:t.hash,restrictions:a,checkedStatus:i,freeDeliveryThreshold:t.freeDeliveryThreshold});document.getElementById("delivery-services-wrapper").appendChild(s)})),tcart__updateDelivery(),o.changeDeliveryTypeListener(),/msie|trident/i.test(navigator.userAgent)?(i=document.createEvent("Event")).initEvent("change",!0,!1):i=new Event("change");var s=document.getElementById("delivery-services-wrapper").querySelector('input[name="tildadelivery-type"]:checked');s&&s.dispatchEvent(i),Array.prototype.forEach.call(l,(function(e){e.style.pointerEvents=""})),tcart__showDeliveryPrice(),"function"==typeof t&&t()};o.getServices(o.deliveryState.projectId,i,s,u,(function(t){if(0===o.deliveryState.badResponseCounters.services)return o.deliveryState.badResponseCounters.services++,void setTimeout((function(){o.renderServices(e)}),2500);o.deliveryState.badResponseCounters.services>0&&o.changeEndpoint(t,(function(){o.getServices(o.deliveryState.projectId,i,s,u,(function(){tcart__preloader.hide(),o.showUnavailableMessage(c)}))}),(function(){tcart__preloader.hide(),o.showUnavailableMessage(c)}))}))},getCityFromGeo:function(e,t,r){var a={projectId:e};if(!window.dev){var i=sessionStorage.getItem("tCityFromGeo");if(null!==i)try{return void t(JSON.parse(i))}catch(e){}}var o=document.getElementById("allrecords").getAttribute("data-tilda-project-lang");o&&(a.lang=o),a=JSON.stringify(a);var s=new XMLHttpRequest;s.onload=function(){s.readyState===s.DONE&&200===s.status&&(window.dev||sessionStorage.setItem("tCityFromGeo",s.responseText),t(JSON.parse(s.responseText)))},"function"==typeof r&&(s.ontimeout=s.onerror=function(e){s.isTimeout="timeout"===e.type,r(s)});var d=this;this.endpointDelivery||(this.endpointDelivery=".tildacdn.com"),s.open("POST","https://geoserv"+this.endpointDelivery+"/api/detect-city/"),s.timeout=3e4,s.send(a)},getPayTypes:function(){var e=document.getElementById("customdelivery"),t;if(e&&(t=e.getAttribute("data-paytypes")),e){if(t)try{t=JSON.parse(t)}catch(e){}if(!t||"object"!=typeof t&&"function"!=typeof t){t={};var r=document.querySelectorAll(".t706 input[name=paymentsystem]");if(Array.prototype.forEach.call(r,(function(e){"cash"===e.value?t.cash="y":"banktransfer"===e.value?t.banktransfer="y":t.card="y"})),!t.card&&!t.cash&&!t.banktransfer){var a=document.querySelector(".t706").getAttribute("data-payment-system");"cash"==a?t.cash="y":"banktransfer"==a?t.banktransfer="y":a&&""!=a&&"none"!=a?t.card="y":t.none="y"}e.setAttribute("data-paytypes",JSON.stringify(t))}return t}},getServices:function(e,t,r,a,i){this.updateTotal();var o=window.tcart.total||0;if(void 0===o||o<1)a({error:new Error("RU"===window.t_delivery__browserLang?"добавьте в корзину хотя бы один товар":"add at least one product")});else{var s=window.tcart.prodamount||0;(window.tcart.prodamount_withdiscount||0===window.tcart.prodamount_withdiscount)&&(s=window.tcart.prodamount_withdiscount);var d=this.removeEmptyOrDeletedProducts(),n=document.getElementById("delivery-services-wrapper");n&&(n.style.display="none",tcart__preloader.show(n,t_delivery__dict("loadingServices"))),tcart__hideDeliveryPrice();var l={action:"list",projectId:e,postalCode:t||0,currency:r,itemsCount:o,cartAmount:s,geoData:this.deliveryState.geoData||{},products:d,paytypes:this.getPayTypes()},c=document.getElementById("allrecords").getAttribute("data-tilda-project-lang");c&&(l.lang=c),l=JSON.stringify(l);var u=new XMLHttpRequest;u.onload=function(){tcart__preloader.hide(),n&&(n.style.display=""),u.readyState===u.DONE&&200===u.status&&a(JSON.parse(u.responseText))},"function"==typeof i&&(u.ontimeout=u.onerror=function(e){u.isTimeout="timeout"===e.type,i(u)});var p=this;this.endpointDelivery||(this.endpointDelivery=".tildacdn.com"),u.open("POST","https://delivery"+this.endpointDelivery+"/cart-api/"),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),u.timeout=3e4,u.send(l)}},getPickupList:function(e){var t=document.querySelector(".t706 .t-form__submit button");t&&(t.classList.add("t706__submit_disable"),t.setAttribute("disabled","disabled")),this.updateTotal();var r=window.tcart.total||0;if(void 0===r||r<1)e.onDone({error:new Error("RU"===window.t_delivery__browserLang?"добавьте в корзину хотя бы один товар":"add at least one product")});else{var a=window.tcart.prodamount||0;(window.tcart.prodamount_withdiscount||0===window.tcart.prodamount_withdiscount)&&(a=window.tcart.prodamount_withdiscount);var i=this.removeEmptyOrDeletedProducts(),o={action:"pickup-list",projectId:e.projectId,postalCode:e.postalCode||0,deliveryId:e.deliveryId,pattern:e.pattern,itemsCount:r,cartAmount:a,geoData:this.deliveryState.geoData||{},products:i,paytypes:this.getPayTypes()},s=document.getElementById("allrecords").getAttribute("data-tilda-project-lang");s&&(o.lang=s),o=JSON.stringify(o);var d=new XMLHttpRequest;d.onload=function(){d.readyState===d.DONE&&200===d.status&&e.onDone(JSON.parse(d.responseText)),tcart__updateDelivery()},"function"==typeof e.onFail&&(d.ontimeout=d.onerror=function(t){d.isTimeout="timeout"===t.type,e.onFail(d)});var n=this;this.endpointDelivery||(this.endpointDelivery=".tildacdn.com"),d.open("POST","https://delivery"+this.endpointDelivery+"/cart-api/"),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),d.timeout=3e4,d.send(o)}},getDeliveryPrice:function(e){tcart__hideDeliveryPrice();var t=document.querySelector(".t706 .t-form__submit button");t&&(t.classList.add("t706__submit_disable"),t.setAttribute("disabled","disabled")),this.updateTotal();var r=window.tcart.total||0;if(void 0===r||r<1)e.onDone({error:new Error("RU"===window.t_delivery__browserLang?"добавьте в корзину хотя бы один товар":"add at least one product")});else{var a=window.tcart.prodamount||0;(window.tcart.prodamount_withdiscount||0===window.tcart.prodamount_withdiscount)&&(a=window.tcart.prodamount_withdiscount);var i=this.removeEmptyOrDeletedProducts(),o={action:"calculate",projectId:e.projectId,postalCode:e.postalCode,deliveryId:e.serviceId,currency:this.deliveryState.currencyCode,itemsCount:r,cartAmount:a,pickupPointId:e.pickupPointId,products:i,guid:this.deliveryState.cityGuid||0};o=JSON.stringify(o);var s=new XMLHttpRequest;s.onload=function(){s.readyState===s.DONE&&200===s.status&&e.onDone(JSON.parse(s.responseText)),tcart__updateDelivery()},"function"==typeof e.onFail&&(s.ontimeout=s.onerror=function(t){s.isTimeout="timeout"===t.type,e.onFail(s)});var d=this;this.endpointDelivery||(this.endpointDelivery=".tildacdn.com"),s.open("POST","https://delivery"+this.endpointDelivery+"/cart-api/"),s.timeout=3e4,s.send(o)}},getCityCoordinates:function(e,t,r){var a=new XMLHttpRequest;a.onload=function(){a.readyState===a.DONE&&200===a.status&&r(JSON.parse(a.responseText))},a.open("GET","https://geocode-maps.yandex.ru/1.x/?apikey="+this.deliveryState.ymapApiKey+"&format=json&geocode="+t),a.timeout=3e4,a.send()},getAddresses:function(e,t,r,a){var i=document.querySelector(".t706 .t-form__submit button");i&&(i.classList.add("t706__submit_disable"),i.setAttribute("disabled","disabled"));var o=this;o.deliveryState.currentRequest&&o.deliveryState.currentRequest.abort(),o.endpointDelivery||(o.endpointDelivery=".tildacdn.com");var s={street:"https://geoserv"+o.endpointDelivery+"/api/address/",city:"https://geoserv"+o.endpointDelivery+"/api/city/",pickup:"https://delivery"+o.endpointDelivery+"/cart-api/",house:"https://geoserv"+o.endpointDelivery+"/api/house/"},d="";try{var n=JSON.parse(e);if(d="t"+t+"_"+n.pattern.toLowerCase(),void 0!==n.fias&&(d+="_"+n.fias),void 0===window.dev){var l=sessionStorage.getItem(d);if(null!==l)try{return void r(JSON.parse(l))}catch(e){}}var c=document.getElementById("allrecords").getAttribute("data-tilda-project-lang");c&&(n.lang=c,e=JSON.stringify(n))}catch(e){}var u=new XMLHttpRequest;u.onload=function(){u.readyState===u.DONE&&200===u.status&&(window.dev||sessionStorage.setItem(d,u.responseText),r(JSON.parse(u.responseText))),tcart__updateDelivery(),o.deliveryState.currentRequest=null},"function"==typeof a&&(u.ontimeout=u.onerror=function(e){u.isTimeout="timeout"===e.type,a(u),o.deliveryState.currentRequest=null}),s[t]&&u.open("POST",s[t]),u.timeout=3e4,u.send(e),o.deliveryState.currentRequest=u},createInput:function(e,t,r,a,i,o,s,d,n,l,c,u,p){t=t||"",r=r||"",i=i||"",o=o||"",e=e||"",u=u||"",a=a||"",p=p||"",c=c?1:0,s=s+" t-input"||"t-input";var v=document.createElement("div");v.classList.add("t-input-group"),v.classList.add("t-input-group_in"),l&&(v.style.cssText=l),n&&v.setAttribute("hidden",""),v.setAttribute("data-input-lid","");var y=document.createElement("div");y.classList.add("t-input-title"),y.classList.add("t-descr"),y.classList.add("t-descr_md"),y.setAttribute("data-redactor-toolbar","no"),y.setAttribute("field",""),y.appendChild(document.createTextNode(t)),v.appendChild(y);var m=document.createElement("div");m.classList.add("t-input-block");var h=document.createElement("input");if(s.split(" ").forEach((function(e){""!==e&&h.classList.add(e)})),p&&h.setAttribute("data-tilda-rule",p),u&&h.setAttribute("inputmode",u),e&&h.setAttribute("type",e),h.setAttribute("data-service-id",o),h.name=d.toLowerCase(),h.value=a,h.placeholder=r,h.autocomplete=-1!==navigator.userAgent.search(/Chrome/)?"no":"off",h.setAttribute("data-tilda-req",c),h.dataset.tildaReq=c,m.appendChild(h),"hidden"!==e){var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("viewBox","0 0 88 88"),f.classList.add("t706__search-icon");var _=document.createElementNS("http://www.w3.org/2000/svg","path");_.setAttribute("d","M85 31.1c-.5-8.7-4.4-16.6-10.9-22.3C67.6 3 59.3 0 50.6.6c-8.7.5-16.7 4.4-22.5 11-11.2 12.7-10.7 31.7.6 43.9l-5.3 6.1-2.5-2.2-17.8 20 9 8.1 17.8-20.2-2.1-1.8 5.3-6.1c5.8 4.2 12.6 6.3 19.3 6.3 9 0 18-3.7 24.4-10.9 5.9-6.6 8.8-15 8.2-23.7zM72.4 50.8c-9.7 10.9-26.5 11.9-37.6 2.3-10.9-9.8-11.9-26.6-2.3-37.6 4.7-5.4 11.3-8.5 18.4-8.9h1.6c6.5 0 12.7 2.4 17.6 6.8 5.3 4.7 8.5 11.1 8.9 18.2.5 7-1.9 13.8-6.6 19.2z"),_.setAttribute("fill","#3f3f3f"),f.appendChild(_),m.appendChild(f);var S=document.createElement("div");S.classList.add("t-input-clear"),m.appendChild(S)}var b=document.createElement("div");b.classList.add("t-input-description"),b.classList.add("t-text"),b.classList.add("t-text_xs"),b.style.cssText="color: #505050; margin: 5px 0 0;",m.appendChild(b);var g=document.createElement("div");return g.classList.add("t-input-error"),m.appendChild(g),v.appendChild(m),v},createRadio:function(e){var t=e.title||"",r=e.minimumTime||"",a=e.minimumPrice||"",i=e.staticPrice||"",o=e.deliveryType,s=e.serviceId,d=e.hint||"",n=e.hash||"",l=e.restrictions||"",c=e.checkedStatus,u=e.freeDeliveryThreshold||"",p=(e.classes||"")+" t-radio__control t-text t-text_xs",v=document.createElement("label");v.setAttribute("data-service-id",s),p.split(" ").forEach((function(e){""!==e&&v.classList.add(e)}));var y=document.createElement("input");c&&(y.checked=!0),y.setAttribute("data-delivery-price",""),l&&(y.dataset.restrictions=l),u&&y.setAttribute("data-free-delivery-threshold",u),n&&y.setAttribute("data-hash-value",n),i&&(y.setAttribute("data-delivery-price",i),y.setAttribute("data-static-price",i)),y.setAttribute("data-service-id",e.serviceId),y.setAttribute("data-delivery-type",o),y.setAttribute("type","radio"),y.setAttribute("name","tildadelivery-type"),y.classList.add("t-radio"),y.classList.add("t-radio_delivery"),y.classList.add("js-tilda-rule"),y.setAttribute("data-tilda-req",1),y.dataset.tildaReq=1,y.setAttribute("value",t),d&&y.setAttribute("data-hint-text",d),v.appendChild(y);var m=document.createElement("div");m.classList.add("t-radio__indicator"),m.style.cssText="border-color: #000;",v.appendChild(m);var h=document.createElement("span");h.classList.add("delivery-checkbox-label"),h.appendChild(document.createTextNode(t)),v.appendChild(h);var f=t_delivery__declensionOfNumber(r),_,_;r&&((_=document.createElement("span")).classList.add("delivery-minimum-time"),_.innerHTML=t_delivery__dict("from")+" "+r+" "+f,v.appendChild(_));if(i)(_=document.createElement("span")).classList.add("delivery-minimum-price"),_.innerHTML=t_delivery__showPrice(i),v.appendChild(_);else if(a){var _;(_=document.createElement("span")).classList.add("delivery-minimum-price"),_.innerHTML=t_delivery__dict("from")+" "+t_delivery__showPrice(a),v.appendChild(_)}return v},createTitle:function(e,t){e=e||"",t=t||"";var r=document.createElement("div");return r.style.margin="20px 0",r.classList.add("t-name"),r.classList.add("t-name_md"),t.split(" ").forEach((function(e){""!==e&&r.classList.add(e)})),r.appendChild(document.createTextNode(e)),r},createSelect:function(e,t,r,a,i){e=e||"",t=t||"";var o="";return o+='<label class="t-input-title t-descr t-descr_md">Пункт выдачи</label>',o+='<div class="ss-select delivery-pickup-select">',o+='<select class="ss-input ss-select delivery-select" data-service-id="'+a+'" name="'+(i=i||"")+'">',o+='<option data-point-id="">Не выбран</option>',r.forEach((function(e){o+="<option data-point-id="+e.id+">"+e.address+"</option>"})),o+="</select>",o+="</div>"},changeDeliveryTypeListener:function(){var e=this,t=document.querySelectorAll(".t706 input[data-delivery-type]");Array.prototype.forEach.call(t,(function(t){t.addEventListener("change",(function(){var t=parseInt(this.getAttribute("data-service-id"),10)||0,r=parseInt(this.getAttribute("data-free-delivery-threshold"),10);e.deliveryState.freeDeliveryThreshold=r||0,e.deliveryState.activeServiceUid=t,tcart__errorHandler.hide(),e.renderAddressFields(this),this.dataset.hashValue&&e.setHashInput(this.dataset.hashValue),e.hidePaymentMethod(this);var a=document.querySelectorAll(".t706 input[data-delivery-type]");Array.prototype.forEach.call(a,(function(e){var t=e.getAttribute("data-static-price");t>0?e.setAttribute("data-delivery-price",t):e.setAttribute("data-delivery-price","")})),e.hints.deleteAll(),e.deliveryState.fullNames.pickup=null,e.deliveryState.fullNames.street=null,e.deliveryState.fullNames.house=null,e.deliveryState.searchboxes["pickup-searchbox"]&&(e.deliveryState.searchboxes["pickup-searchbox"]=null),this.getAttribute("data-hint-text")&&e.hints.render(this.getAttribute("data-hint-text")),tcart__updateDelivery()}),!1)}))},hidePaymentMethod:function(e){var t=document.querySelector('.t706 [data-payment-variant-system="cash"]');if(t){var r=t.parentNode,a,i=r.closest(".t-radio__wrapper-payment").querySelector('[data-payment-variant-system]:not([data-payment-variant-system="cash"])'),o;if("cash"===e.dataset.restrictions&&t){if(r.style.display="none",i.checked=!0,i)/msie|trident/i.test(navigator.userAgent)?(o=document.createEvent("Event")).initEvent("change",!0,!1):o=new Event("change"),i.dispatchEvent(o)}else r.style.display=""}},removePriceValueInRadio:function(e){var t=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+e+'"]');t&&(t.removeAttribute("data-delivery-price"),tcart__updateDelivery(),tcart__hideDeliveryPrice())},updatePriceValueInRadio:function(e,t){var r=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+t+'"]'),a=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+t+'"] ~ span.delivery-minimum-price');r&&(r.setAttribute("data-delivery-price",e),tcart__updateDelivery(),tcart__showDeliveryPrice()),a&&(a.innerHTML=t_delivery__showPrice(e))},changePickupHandler:function(e,t,r,a,i,o){var s=a.querySelector(".searchbox-input"),d=s.getAttribute("data-service-id"),n=this;r=r||this.deliveryState.city.postalCode,s.setAttribute("data-pickup-id",e),s.setAttribute("data-pickup-address",i),s.value=t;var l=function(t){var r=t.price;if(t.error||0===t.length){var a=window.t_delivery__browserLang.toLowerCase(),i=t.userFriendlyError?t.userFriendlyError[a]?t.userFriendlyError[a]:t.userFriendlyError.en:"";return tcart__errorHandler.show(i||t.error),window.tcart.emptyDeliveryServices=!0,void tcart__updateDelivery()}window.tcart.emptyDeliveryServices=!1,tcart__errorHandler.hide(),void 0!==t.hash&&n.setHashInput(t.hash),e||(r=0),n.updatePriceValueInRadio(r,d),n.setFullAddress(n.getFullAddress())},c;n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:r,serviceId:d,pickupPointId:e,onDone:l,onFail:function(t){n.changeEndpoint(t,(function(){n.getDeliveryPrice({projectId:n.deliveryState.projectId,postalCode:r,serviceId:d,pickPointId:e,onDone:l,onFail:function(){var e="";e="RU"===window.t_delivery__browserLang?'Невозможно получить почтовый индекс для доставки. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a postal code for delivery. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get a postal code for street" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show("Request failed: "+e),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery()}})}))}}),o&&(c=0==o[0]&&0==o[1]),o&&window.t_delivery__map&&!c&&window.t_delivery__map.setCenter(o,16)},renderAddressFields:function(e){this.disableChoseServiceControls();var t=this,r=document.getElementById("customdelivery"),a=e.getAttribute("data-service-id"),i=document.getElementById("addresses-wrapper");i&&i.parentNode&&i.parentNode.removeChild(i),r.setAttribute("data-service-id",a);var o=document.createElement("div");o.id="addresses-wrapper",r.appendChild(o);var s=e.getAttribute("data-delivery-type"),d=document.querySelector(".t706 #city-searchbox input");switch(delete t.deliveryState.pickupPointId,s){case"pickup":tcart__preloader.show(document.getElementById("addresses-wrapper"),t_delivery__dict("loadingPickup")),window.tcart.emptyDeliveryServices=!1;var n="",l=document.querySelector('.t706 input.t-radio_delivery[data-service-id="'+a+'"]');l&&(n=l.dataset.restrictions||"");var c=function(e){if(tcart__preloader.hide(),e.error){var r=window.t_delivery__browserLang.toLowerCase(),i=e.userFriendlyError?e.userFriendlyError[r]?e.userFriendlyError[r]:e.userFriendlyError.en:"";return tcart__errorHandler.show(i||e.error),window.tcart.emptyDeliveryServices=!0,t.enableChoseServiceControls(),d.classList.remove("load"),d.readOnly=!1,void tcart__updateDelivery()}e=e.map((function(e){return"cash"===n&&(e.cash="n"),e}));var s=t.createInput("",t_delivery__dict("pickup"),t_delivery__dict("selectPickup"),null,null,a,"searchbox-input js-tilda-rule","tildadelivery-pickup-name",null,null,!0,null,"chosevalue"),l=t.createSearchbox(s,"pickup-searchbox");document.getElementById("addresses-wrapper").appendChild(l),t.deliveryState.searchboxes["pickup-searchbox"]={},t.deliveryState.searchboxes["pickup-searchbox"].autocompleteAddress=e,t.deliveryState.pickupList=e,t.deliveryState.ymapApiKey&&t.mapInit("yandex"),t.searchboxInit("pickup-searchbox","pickup",null,e),t.renderUserFields(o,a),t.changeCartInputsHandler();var c=document.querySelector(".t706 #pickup-searchbox");t.deliveryState.ymapApiKey&&t.mapAddPoints("",e,c),t.enableChoseServiceControls(),d.classList.remove("load"),d.readOnly=!1};t.getPickupList({projectId:t.deliveryState.projectId,postalCode:t.deliveryState.city.postalCode,deliveryId:a,onDone:c,onFail:function(e){t.changeEndpoint(e,(function(){t.getPickupList({projectId:t.deliveryState.projectId,postalCode:t.deliveryState.city.postalCode,deliveryId:a,onDone:c})}))}});break;case"delivery":window.tcart.emptyDeliveryServices=!1,t.renderUserFields(o,a),t.changeCartInputsHandler(),t.enableChoseServiceControls(),d.classList.remove("load"),d.readOnly=!1}},clearHouseInput:function(){var e=document.querySelector('.t706 #customdelivery [name="tildadelivery-house"]');e&&(e.value="")},renderUserFields:function(e,t){var r=this,a=this.deliveryState.services[t].fields,i=0;for(var o in a)switch(o){case"street":case"comment":case"userInitials":break;default:i++}var s=0;for(var d in a){var n=a[d].autocomplete,l="",c="",u="",p="",v="",y=!0;switch(d){case"street":l=t_delivery__dict("street"),c="width: 100%",this.deliveryState.city.hasHousesWithoutStreets&&(y=!1);break;case"house":s++,l=t_delivery__dict("house"),this.deliveryState.city.hasHousesWithoutStreets&&(y=!0);break;case"entrance":s++,l=t_delivery__dict("entrance"),u="number",p="numeric",y=!1;break;case"floor":s++,l=t_delivery__dict("floor"),u="number",p="numeric",y=!1;break;case"aptOffice":s++,l=t_delivery__dict("apt"),y=!1;break;case"phone":s++,l=t_delivery__dict("phone"),u="number",p="numeric";break;case"entranceCode":s++,l=t_delivery__dict("entranceCode"),y=!1;break;case"comment":l=t_delivery__dict("comment"),c="width: 100%",y=!1,v=t_delivery__dict("orderComment");break;case"oneLineAddress":s++,l=t_delivery__dict("address");break;case"userInitials":c="width: 100%",l=t_delivery__dict("fullName"),v=t_delivery__dict("johnDoe")}i===s&&i%2!=0&&(c="width: 100%"),l=l||"";var m="tildadelivery-"+d,h="";if(n){y&&(h="chosevalue");var f=this.createInput(u,l,v,"","",t,"searchbox-input js-tilda-rule",m,!1,c,y,p,h),_=d+"-searchbox",S=this.createSearchbox(f,_);e.appendChild(S),this.searchboxInit(_,d)}else{"userInitials"===d&&(h="name");var b=this.createInput(u,l,v,"","",t,"js-tilda-rule",m,!1,c,y,p,h);e.appendChild(b)}}this.restoreTcartDelivery()},hints:{render:function(e){var t=document.getElementById("delivery-services-wrapper"),r=document.createElement("div"),a;"delivery-hint t-text t-text_xs".split(" ").forEach((function(e){r.classList.add(e)})),r.setAttribute("id","delivery-hint"),r.appendChild(document.createTextNode(e)),t.insertAdjacentElement("afterend",r)},deleteAll:function(){var e=document.querySelector(".t706 .delivery-hint");e&&e.parentNode&&e.parentNode.removeChild(e)}},showUnavailableMessage:function(e){var t=this.createInput("hidden","","","nodelivery",null,null,"js-tilda-rule","delivery-badresponse-comment",null,null,!0,"","deliveryreq");window.tcart&&(window.tcart.system="none");var r=document.createElement("div");r.style.cssText="margin: 20px 0; line-height: 22px; color: red;",r.classList.add("t-text"),r.appendChild(document.createTextNode(t_delivery__dict("unavailable"))),e.appendChild(r),e.appendChild(t)},updateTotal:function(){void 0!==window.tcart.products&&0!==window.tcart.products.length||void 0===window.tcart__syncProductsObject__LStoObj||void 0===window.tcart__updateTotalProductsinCartObj||(tcart__syncProductsObject__LStoObj(),tcart__updateTotalProductsinCartObj())},removeEmptyOrDeletedProducts:function(){var e=[];return window.tcart.products.forEach((function(t){"{}"!==JSON.stringify(t)&&"yes"!==t.deleted&&e.push(t)})),e},updateProjectId:function(){var e=this,t=[document.getElementById("allrecords"),document.getElementById("t-header"),document.getElementById("t-footer")];Array.prototype.forEach.call(t,(function(t){t&&!parseInt(e.deliveryState.projectId,10)&&(e.deliveryState.projectId=parseInt(t.getAttribute("data-tilda-project-id"),10))}));var r=document.getElementById("tildacopy");r&&!parseInt(e.deliveryState.projectId,10)&&(e.deliveryState.projectId=parseInt((r.getAttribute("data-tilda-sign")||"").split("#")[0],10))},endpointDelivery:".tildacdn.com",changeEndpoint:function(e,t,r){var a=this;"object"==typeof e&&(e.status>=500||408==e.status||410==e.status||429==e.status||e.isTimeout)&&".tildacdn.com"===this.endpointDelivery?(this.endpointDelivery="2.tildacdn.com","function"==typeof t&&t()):(e&&e.responseText?console.log("["+e.status+"] "+e.responseText+". Please, try again later."):e&&e.statusText?console.log("Error ["+e.status+", "+e.statusText+"]. Please, try again later."):e&&e.status?console.log("["+e.status+"] Unknown error. Please, try again later."):console.log("Unknown error. Please, try again later."),"function"==typeof r&&r())}},tcart__errorHandler={show:function(e){var t=document.querySelectorAll(".t706 .js-errorbox-all"),r=document.querySelectorAll(".t706 .t-form__errorbox-item.js-rule-error-string");e&&Array.prototype.forEach.call(r,(function(t){t.innerHTML=e})),Array.prototype.forEach.call(r,(function(e){""!==e.textContent&&(e.style.display="block",Array.prototype.forEach.call(t,(function(e){e&&(e.style.display="")})))}))},hide:function(){var e=document.querySelectorAll(".t706 .js-errorbox-all"),t=document.querySelectorAll(".t706 .t-form__errorbox-item.js-rule-error-string");Array.prototype.forEach.call(e,(function(e){e&&(e.style.display="none")})),Array.prototype.forEach.call(t,(function(e){e&&(e.style.display="none")})),Array.prototype.forEach.call(t,(function(e){e.innerHTML=""}))}},tcart__inputErrorHandler={show:function(e,t){var r=e.closest(".t-input-group"),a;r&&(r.querySelector(".t-input-error").textContent=t,r.classList.add("js-error-control-box"))},hide:function(e){var t=e.closest(".t-input-group"),r;t&&(t.querySelector(".t-input-error").textContent="",t.classList.remove("js-error-control-box"))}};function tcart__hideDeliveryPrice(){var e=document.querySelector(".t706 .t706__cartwin-totalamount-info");e&&(e.style.opacity=0);var t=document.querySelector(".t706 .delivery-full-address");t&&(t.style.opacity=0)}function tcart__showDeliveryPrice(){var e=document.querySelector(".t706 .t706__cartwin-totalamount-info");e&&(e.style.opacity=1);var t=document.querySelector(".t706 .delivery-full-address");t&&(t.style.opacity=1)}var tcart__preloader={show:function(e,t){if(e){var r=document.getElementById("customdelivery");if(r&&!r.querySelector(".tcart__preloader")){var a=document.createElement("div");if(a.classList.add("tcart__preloader"),a.style.cssText="margin: 20px 0;",t){var i=document.createElement("div");i.classList.add("t-text"),a.style.cssText="text-align: center; opacity: .5; font-size: 15px;",i.appendChild(document.createTextNode(t)),a.appendChild(i)}var o=document.createElement("div");o.classList.add("lds-ellipsis"),o.appendChild(document.createElement("div")),o.appendChild(document.createElement("div")),o.appendChild(document.createElement("div")),o.appendChild(document.createElement("div")),a.appendChild(o),e.insertAdjacentElement("beforebegin",a)}}},hide:function(){var e=document.querySelector(".t706 .tcart__preloader");e&&e.parentNode&&e.parentNode.removeChild(e)}};function tcart__rerenderDeliveryServices(){clearTimeout(window.rerenderTimer),window.rerenderTimer=setTimeout((function(){var e=document.querySelectorAll(".t706__cartwin-content .t706__product, .t706__cartwin-content .t-form__inputsbox");Array.prototype.forEach.call(e,(function(e){e.style.pointerEvents="none"}));var t=!1,r=tcart_newDelivery,a=r.deliveryState,i=a.services,o=a.activeServiceUid,s=a.pickupPointId;if(!o)return Array.prototype.forEach.call(e,(function(e){e.style.pointerEvents=""})),void(0===Object.keys(r.deliveryState.services).length&&r.renderServices(a.postalCode));var d=[],n=[];if(Object.keys(i).forEach((function(e){d.push(parseInt(e,10))})),r.updateProjectId(),!parseInt(a.projectId,10)){var l="";return l="RU"===window.t_delivery__browserLang?'Невозможно получить сервисы доставок. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get delivery services" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a delivery services. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get delivery services" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show(l),window.tcart.emptyDeliveryServices=!0,void tcart__updateDelivery()}var c=function(i){if(Array.isArray(i)&&i.forEach((function(e){n.push(parseInt(e.id,10))})),d.sort((function(e,t){return e-t})),n.sort((function(e,t){return e-t})),t=JSON.stringify(n)!==JSON.stringify(d))-1!==n.indexOf(o)?r.renderServices(a.postalCode,(function(){var e;document.querySelector('.t706 input[data-service-id="'+o+'"]').checked=!0})):r.renderServices(a.postalCode);else{var c=document.querySelectorAll(".t706 #delivery-services-wrapper .t-radio__control"),u;Array.prototype.forEach.call(c,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})),Array.isArray(i)&&i.forEach((function(e){if(e.currency&&e.currency!==r.deliveryState.currencyCode)console.error(e.title+": wrong delivery currency ("+e.currency+")");else{r.deliveryState.services[e.id]={},r.deliveryState.services[e.id].fields=e.fields,r.deliveryState.services[e.id].strongAddress=e.strongAddress;var t="";"n"===e.cash&&(t+="cash");var a=!1;parseInt(e.id,10)===o&&(a=!0);var i=r.createRadio({title:e.title,minimumTime:e.minimumDeliverTime,minimumPrice:e.minimumPrice,staticPrice:e.staticPrice,deliveryType:e.type,serviceId:e.id,hint:e.hint,hash:e.hash,restrictions:t,checkedStatus:a,freeDeliveryThreshold:e.freeDeliveryThreshold});document.getElementById("delivery-services-wrapper").appendChild(i)}})),u="object"==typeof a.postalCode?a.cityPostalCode:a.postalCode;var p=function(t){if(t.error){window.tcart.emptyDeliveryServices=!0;var a=window.t_delivery__browserLang.toLowerCase(),i=t.userFriendlyError?t.userFriendlyError[a]?t.userFriendlyError[a]:t.userFriendlyError.en:"";tcart__errorHandler.show(i||t.error)}else window.tcart.emptyDeliveryServices=!1,tcart__errorHandler.hide();if(void 0!==t.hash&&r.setHashInput(t.hash),void 0!==t.price){var s=t.price;r.updatePriceValueInRadio(s,o)}tcart__updateDelivery(),r.changeDeliveryTypeListener(),Array.prototype.forEach.call(e,(function(e){e.style.pointerEvents=""})),tcart__showDeliveryPrice()};s||r.deliveryState.fullNames.street?r.getDeliveryPrice({projectId:a.projectId,postalCode:u,serviceId:o,pickupPointId:s,onDone:p,onFail:function(){r.changeEndpoint(l,(function(){r.getDeliveryPrice({projectId:a.projectId,postalCode:u,serviceId:o,pickupPointId:s,onDone:p,onFail:function(){var e="";e="RU"===window.t_delivery__browserLang?'Невозможно получить почтовый индекс для доставки. Пожалуйста, перезагрузите страницу и попробуйте еще раз. Если ситуация не изменилась, обратитесь в поддержку <a href="mailto:team@tilda.cc?subject=Unable to get active service" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.':'Unable to get a postal code for delivery. Please <a href="javascript:window.location.reload();" style="color:#fff;text-decoration:underline;">reload the page</a> and try again. If the situation has not changed, please contact support <a href="mailto:team@tilda.cc?subject=Unable to get active service" style="color:#fff;text-decoration:underline;">team@tilda.cc</a>.',tcart__errorHandler.show("Request failed: "+e),window.tcart.emptyDeliveryServices=!0,tcart__updateDelivery()}})}))}}):(tcart__updateDelivery(),r.changeDeliveryTypeListener(),tcart__showDeliveryPrice())}Array.prototype.forEach.call(e,(function(e){e.style.pointerEvents=""}))};r.getServices(a.projectId,a.cityPostalCode,a.currencyCode,c,(function(e){r.changeEndpoint(e,(function(){r.getServices(a.projectId,a.cityPostalCode,a.currencyCode,c)}))}))}),500)}function t_delivery__dict(e){var t=[];t.address={EN:"Address",RU:"Адрес",FR:"Adresse",DE:"Adresse",ES:"Dirección",PT:"Endereço",JA:"住所",ZH:"地址",UK:"Адреса",PL:"Adres",KK:"Мекен-жай",IT:"Indirizzo",LV:"Adrese"},t.city={EN:"City",RU:"Город",FR:"Ville",DE:"Stadt",ES:"Ciudad",PT:"Cidade",JA:"市",ZH:"城市",UK:"Місто",PL:"Miasto",KK:"Қала",IT:"Città",LV:"Pilsēta"},t.street={EN:"Street",RU:"Улица",FR:"Rue",DE:"Straße",ES:"Calle",PT:"Rua",JA:"通り",ZH:"街道",UK:"Вулиця",PL:"Ulica",KK:"Көше",IT:"Strada",LV:"Iela"},t.house={EN:"House",RU:"Дом",FR:"Loger",DE:"Haus",ES:"Edificio №",PT:"Lar",JA:"家",ZH:"屋",UK:"Будинок",PL:"Budynek",KK:"Үй",IT:"Casa",LV:"Māja"},t.entrance={EN:"Entrance",RU:"Подъезд",FR:"Entrée",DE:"Eingang",ES:"Entrada",PT:"Entrada",JA:"エントランス",ZH:"入口",UK:"Під’їзд",PL:"Wejście",KK:"Кіру",IT:"Ingresso",LV:"Ieeja"},t.floor={EN:"Floor",RU:"Этаж",FR:"Étage",DE:"Fußboden",ES:"Planta",PT:"Andar",JA:"床",ZH:"地面",UK:"Поверх",PL:"Piętro",KK:"Еден",IT:"Pavimento",LV:"Stāvs"},t.apt={EN:"Apt/office",RU:"Квартира/офис",FR:"Apt/bureau",DE:"Apt/Büro",ES:"Piso/oficina",PT:"Apt/escritório",JA:"アプト/オフィス",ZH:"公寓/办公室",UK:"Квартира/офіс",PL:"Mieszkanie/lokal",KK:"Пәтер/кеңсе",IT:"Abitazione/ufficio",LV:"Dzīvoklis/birojs"},t.phone={EN:"Phone",RU:"Телефон",FR:"Téléphoner",DE:"Telefon",ES:"Teléfono",PT:"Telefone",JA:"電話",ZH:"电话",UK:"Телефон",PL:"Telefon",KK:"Телефон",IT:"Telefono",LV:"Tālrunis"},t.phones={EN:"Phones",RU:"Телефоны",FR:"Téléphones",DE:"Telefone",ES:"Telefonos",PT:"Telefones",JA:"電話",ZH:"手机",UK:"Телефони",PL:"Telefony",KK:"Телефондар",IT:"Cellulari",LV:"Telefoni"},t.entranceCode={EN:"Entrance code",RU:"Домофон",FR:"Code d'entrée",DE:"Zugangscode",ES:"Código de entrada",PT:"Código de entrada",JA:"エントランスコード",ZH:"入口代码",UK:"Домофон",PL:"Domofon",KK:"Түсу коды",IT:"Codice d'ingresso",LV:"Ieejas kods"},t.comment={EN:"Comment",RU:"Комментарий",FR:"Commenter",DE:"Kommentar",ES:"Comentario",PT:"Comente",JA:"コメント",ZH:"评论",UK:"Коментар",PL:"Komentarz",KK:"Түсініктеме",IT:"Commento",LV:"Komentāri"},t.day={EN:"day",RU:"дня",FR:"journée",DE:"tag",ES:"día",PT:"dia",JA:"日",ZH:"日",UK:"дні",PL:"dzień",KK:"күн",IT:"giorno",LV:"diena"},t.days={EN:"days",RU:"дней",FR:"journées",DE:"Tage",ES:"dias",PT:"dias",JA:"日々",ZH:"天",UK:"днів",PL:"dzień",KK:"күн",IT:"giorni",LV:"dienas"},t.from={EN:"from",RU:"от",FR:"de",DE:"von",ES:"de",PT:"de",JA:"から",ZH:"从",UK:"від",PL:"od",KK:"бастап",IT:"da",LV:"no"},t.deliveryNotPossible={EN:"Unfortunately, delivery to your chosen city is not possible",RU:"К сожалению, в выбранный вами город доставка не осуществляется",FR:"Malheureusement, la livraison à votre ville choisie n'est pas possible",DE:"Leider ist eine Lieferung in der gewählten Stadt nicht möglich",ES:"Por desgracia, la entrega a su ciudad elegida no es posible",PT:"Infelizmente, a entrega à sua cidade escolhida não é possível",JA:"残念ながら、あなたの選ばれた都市への配信を行うことはできません",ZH:"不幸的是，送货到你所选择的城市是不可能的",UK:"На жаль, в обране місто доставка не здійснюється",PL:"Niestety nie dostarczamy w wybrane przez ciebie miejsce",KK:"Өкінішке орай, Сіздің таңдаған қалаға жеткізу мүмкін емес",IT:"Purtroppo, la consegna al vostro città scelta non è possibile",LV:"Diemžēl piegāde uz jūsu izvēlēto pilsētu netiek veikta"},t.delivery={EN:"Delivery",RU:"Доставка",FR:"Livraison",DE:"Lieferung",ES:"Entrega",PT:"Entrega",JA:"配達",ZH:"交货",UK:"Доставка",PL:"Dostawa",KK:"Жеткізілім",IT:"Consegna",LV:"Piegāde"},t.pickup={EN:"Pickup location",RU:"Пункт получения",FR:"Lieu de ramassage",DE:"Treffpunkt",ES:"Lugar de recogida",PT:"Local de retirada",JA:"ピックアップ場所",ZH:"接人的地方",UK:"Пункт отримання",PL:"Miejsce odbioru",KK:"Жеткізу орны",IT:"Posto di raccolta",LV:"Saņemšanas punkts"},t.selectPickup={EN:"Select pickup location",RU:"Выберите пункт получения",FR:"Sélectionnez l'emplacement pick-up",DE:"Wählen Sie Abholort",ES:"Seleccionar ubicación de recogida",PT:"Escolha local de retirada",JA:"ピックアップ場所を選択",ZH:"选择的取货地点",UK:"Виберіть пункт отримання",PL:"Wybierz miejsce odbioru",KK:"Желімді орынды таңдаңыз",IT:"Seleziona ubicazione pickup",LV:"Izvēlieties pikaps atrašanās vietu"},t.selectAddress={EN:"Please select an address from the options provided",RU:"Пожалуйста, выберите адрес из предложенных вариантов",FR:"S'il vous plaît sélectionner une adresse parmi les options proposées",DE:"Bitte wählen Sie eine Adresse aus den Optionen zur Verfügung gestellt",ES:"Por favor, seleccione una dirección de una de las opciones proporcionadas",PT:"Por favor seleccione um endereço entre as opções fornecidas",JA:"提供されるオプションからアドレスを選択してください",ZH:"请从所提供的选项的地址",UK:"Будь ласка, виберіть адресу із запропонованих варіантів",PL:"Wybierz adres wśród oferowanych opcji",KK:"Берілген параметрлерден мекенжайды таңдаңыз",IT:"Si prega di selezionare un indirizzo tra le opzioni previste",LV:"Lūdzu, izvēlieties adresi no piedāvātajām iespējām"},t.selectCity={EN:"Please select an city from the options provided",RU:"Пожалуйста, выберите город из предложенных вариантов",FR:"S'il vous plaît choisir une ville parmi les options proposées",DE:"Bitte wählen Sie eine Stadt aus den Optionen zur Verfügung gestellt",ES:"Por favor, seleccione una ciudad de entre las opciones proporcionadas",PT:"Por favor, selecione uma cidade entre as opções fornecidas",JA:"提供されるオプションから都市を選択してください",ZH:"请从所提供的选项的城市",UK:"Будь ласка, виберіть місто із запропонованих варіантів",PL:"Wybierz miejsce wśród oferowanych opcji",KK:"Берілген параметрлерден бір қаланы таңдаңыз",IT:"Si prega di selezionare una città tra le opzioni previste",LV:"Lūdzu, izvēlieties pilsētu no piedāvātajām iespējām"},t.orderComment={EN:"Order comment",RU:"Комментарий к заказу",FR:"Commentaire de commande",DE:"Bestellen Kommentar",ES:"Comentario de la orden",PT:"Comentário ordem",JA:"注文のコメント",ZH:"为了评论",UK:"Коментар до замовлення",PL:"Komentarz do zamówienia",KK:"Тапсырыс беру қатынасқа",IT:"Commento Order",LV:"Komentējiet pasūtījumu"},t.select={EN:"Select",RU:"Выбрать",FR:"Sélectionner",DE:"Wählen",ES:"Seleccione",PT:"Selecionar",JA:"選択する",ZH:"选择",UK:"Вибрати",PL:"Wybierz",KK:"Таңдаңыз",IT:"Selezionare",LV:"Izvēlieties"},t.workingHours={EN:"Working hours",RU:"Время работы",FR:"Heures d'ouverture",DE:"Arbeitszeit",ES:"Horas Laborales",PT:"Jornada de trabalho",JA:"勤務時間",ZH:"工作时间",UK:"Час роботи",PL:"Godziny robocze",KK:"Жұмыс сағаттары",IT:"Ore lavorative",LV:"Darba stundas"},t.unavailable={EN:"Delivery service temporarily unavailable.",RU:"К сожалению, в данный момент сервис доставки недоступен.",FR:"Service de livraison temporairement indisponible.",DE:"Zustelldienst vorübergehend nicht verfügbar.",ES:"Servicio de entrega disponible temporalmente.",PT:"Serviço de entrega temporariamente indisponíveis.",JA:"配達サービスが一時的に利用できません。",ZH:"送货服务暂时不可用。",UK:"Служба доставки тимчасово не працює.",PL:"Niestety, w tym momencie dostawa nie jest możliwa.",KK:"Жеткізу қызметі уақытша қол жетімсіз.",IT:"Servizio di consegna temporaneamente non disponibile.",LV:"Diemžēl piegādes pakalpojums pašlaik nav pieejams."},t.loadingServices={EN:"Loading delivery services",RU:"Получение сервисов доставки",FR:"Services de livraison de chargement",DE:"Laden Zustelldienste",ES:"Servicios Carga de entrega",PT:"Serviços de carga de entrega",JA:"ローディング配信サービス",ZH:"加载送货服务",UK:"Отримання сервісів доставки",PL:"Otrzymanie serwisów dostawy",KK:"Жеткізу қызметтері жүктелуде",IT:"Servizi di consegna Caricamento",LV:"Piegādes pakalpojumu saņemšana"},t.loadingPickup={EN:"Loading a list of pickup locations",RU:"Получение списка пунктов выдачи заказов",FR:"Chargement d'une liste d'emplacements pick-up",DE:"Laden einer Liste von Standorten pickup",ES:"Carga de una lista de los lugares de recogida",PT:"Carregando uma lista de locais de coleta",JA:"ピックアップ場所のリストを読み込みます",ZH:"加载接客位置的列表",UK:"Отримання списку пунктів видачі замовлень",PL:"Otrzymanie listy miejsc wydania zamówień",KK:"Желімді орындардың тізімін жүктеу",IT:"Caricamento di un elenco di luoghi di ritiro",LV:"Saņemšanas punktu saraksta iegūšana"},t.noResult={EN:"No results were found for your request",RU:"По вашему запросу ничего не найдено",FR:"Aucun résultat n'a été trouvé pour votre demande",DE:"Es wurden keine Ergebnisse für Ihre Anfrage gefunden",ES:"No se encontraron resultados para su solicitud",PT:"Não foram encontrados resultados para sua solicitação",JA:"該当する結果はあなたの要求のために見つかりませんでした",ZH:"没有找到您的要求",UK:"За вашим запитом нічого не знайдено",PL:"Brak wyników",KK:"Нәтижелері Сіздің сұранысыңыз бойынша табылған жоқ",IT:"Non sono stati trovati risultati per la tua richiesta",LV:"Jūsu meklēšanas vaicājumam netika atrasts neviens rezultāts"},t.change={EN:"Change",RU:"Изменить",FR:"Changer",DE:"Veränderung",ES:"Cambio",PT:"Mudar",JA:"変化する",ZH:"改变",UK:"Змінити",PL:"Zmień",KK:"Өзгеріс",IT:"Modificare",LV:"Rediģēt"},t.fullName={EN:"Full name",RU:"Получатель (ФИО полностью)",FR:"Nom et prénom",DE:"Vollständiger Name",ES:"Nombre completo",PT:"Nome completo",JA:"フルネーム",ZH:"全名",UK:"Одержувач (ПІБ повністю)",PL:"Pełne imię",KK:"Толық аты",IT:"Nome e cognome",LV:"Saņēmējs (pilns vārds)"},t.johnDoe={EN:"John Doe",RU:"Иванов Иван Иванович",FR:"Jean Dupont",DE:"Max Mustermann",ES:"Fulano de Tal",PT:"Fulano de Tal",JA:"なになに",ZH:"张三",UK:"Іван Іванович Іваненко",PL:"Jan Kowalski",KK:"Алмаз Ахметов",IT:"Mario Rossi",LV:"John Doe"};var r=window.t_delivery__browserLang;return t[e]?t[e][r]?t[e][r]:t[e].EN:"Text not found #"+e}function t_delivery__declensionOfNumber(e){return parseInt(e,10)%10==1&&11!==parseInt(e,10)?t_delivery__dict("day"):t_delivery__dict("days")}function t_delivery__showPrice(e){if(void 0===e||0==e||""==e)e="";else{var t;if(e=e.toString(),void 0!==window.tcart.currency_dec&&"00"==window.tcart.currency_dec)if(-1===e.indexOf(".")&&-1===e.indexOf(","))e+=".00";else 1===e.substr(e.indexOf(".")+1).length&&(e+="0");e=e.replace(/\B(?=(\d{3})+(?!\d))/g," "),void 0!==window.tcart.currency_sep&&","==window.tcart.currency_sep&&(e=e.replace(".",",")),e=window.tcart.currency_txt_l+e+window.tcart.currency_txt_r}return e}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}return null});